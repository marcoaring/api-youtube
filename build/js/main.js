var appVue=new Vue({el:".app-vue",data:{videos:[],modalVideo:[],searchResults:[],menuSelected:!1,searchSelected:!1,loader:!1,modal:!1,search:"",nextPage:"",urlApi:"https://www.googleapis.com/youtube/v3/",keyApi:"AIzaSyDkAhIY2OrvmrYHQp_gxT8mywbx2Lqn_0g",idChannel:"UCH2VZQBLFTOp6I_qgnBJCuQ"},created:function(){this.loadVideos(),this.search=this.getUrlParameter("search")?this.getUrlParameter("search"):"",this.searchSelected=""!=this.getUrlParameter("search")},methods:{openMenu:function(){this.menuSelected?this.menuSelected=!1:(this.menuSelected=!0,this.searchSelected=!1)},openSearch:function(){this.searchSelected?this.searchSelected=!1:(this.searchSelected=!0,this.menuSelected=!1)},ISO8601toDuration:function(e){return 1==(e=(e=(e=e.replace("PT","")).split("S").join(":").split("M").join(":").split("H").join(":").split(":")).slice(0,-1)).length?(e.push("00"),e=e[0]+":"+e[1]):2==e.length?(2!=e[1].length&&(e[1]="0"+e[1]),e=e[0]+":"+e[1]):3==e.length&&(2!=e[2].length&&(e[2]="0"+e[2]),e=e[0]+":"+e[1]+":"+e[2]),e},formatViews:function(e){return 1e9<=e?(e/1e9).toFixed(1).replace(/\.0$/,"")+"G":1e6<=e?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":1e3<=e?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":void 0},formatViewsInternal:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatDate:function(e){return meses=["Janeiro","Fevereiro","MarÃ§o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],e=new Date(e),day=e.getDate().toString(),dayFinal=1==day.length?"0"+day:day,month=e.getMonth(),year=e.getFullYear(),dayFinal+" de "+meses[month]+" de "+year},getUrlParameter:function(e){var t,i,s=decodeURIComponent(window.location.search.substring(1)).split("&");for(i=0;i<s.length;i++)return(t=s[i].split("="))[0]===e&&(void 0===t[1]||t[1])},cutLongText:function(e,t){return e.length>t?e.substring(0,t)+"...":e},loadVideos:function(){var s=this,e="";e=this.search?this.urlApi+"search?key="+this.keyApi+"&channelId="+this.idChannel+"&part=snippet,id&type=video&order=date&q="+this.search:this.urlApi+"search?key="+this.keyApi+"&channelId="+this.idChannel+"&part=snippet,id&type=video&order=date&maxResults=12",$.ajax({url:e,success:function(e){var i="";s.videos=e,s.nextPage=s.videos.nextPageToken,$.each(s.videos.items,function(t,e){i=e.id.videoId,$.ajax({url:s.urlApi+"videos?key="+s.keyApi+"&id="+i+"&part=contentDetails,statistics",success:function(e){s.$set(s.videos.items[t],"viewCount",s.formatViews(e.items[0].statistics.viewCount)),s.$set(s.videos.items[t],"duration",s.ISO8601toDuration(e.items[0].contentDetails.duration))}})})}})},loadMoreVideos:function(e){var s=this;$.ajax({url:s.urlApi+"search?key="+s.keyApi+"&channelId="+s.idChannel+"&part=snippet,id&type=video&order=date&pageToken="+e+"&maxResults=12",beforeSend:function(){s.loader=!0},success:function(e){var i="";s.nextPage=e.nextPageToken,$.each(e.items,function(e,t){s.videos.items.push(t)}),$.each(s.videos.items,function(t,e){i=e.id.videoId,$.ajax({url:s.urlApi+"videos?key="+s.keyApi+"&id="+i+"&part=contentDetails,statistics",success:function(e){s.$set(s.videos.items[t],"viewCount",s.formatViews(e.items[0].statistics.viewCount)),s.$set(s.videos.items[t],"duration",s.ISO8601toDuration(e.items[0].contentDetails.duration))}})})},complete:function(){s.loader=!1}})},openModal:function(e){var t=this;this.modal=!0,$.ajax({url:t.urlApi+"videos?key="+t.keyApi+"&id="+e+"&part=id,snippet,contentDetails,statistics",success:function(e){t.modalVideo=e.items[0]}})}},watch:{search:function(){this.loadVideos()}}});